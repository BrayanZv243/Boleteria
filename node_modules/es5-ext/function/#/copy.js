"use strict";

var mixin         = require("../../object/mixin")
<<<<<<< HEAD
  , validFunction = require("../valid-function");

module.exports = function () {
	validFunction(this);

	var args = [];
	for (var i = 0; i < this.length; ++i) args.push("arg" + (i + 1));
	// eslint-disable-next-line no-new-func
	var fn = new Function(
		"fn",
		"return function " +
			(this.name || "") +
			"(" +
			args.join(", ") +
=======
  , validFunction = require("../valid-function")
  , re            = /^\s*function\s*([\0-')-\uffff]+)*\s*\(([\0-(*-\uffff]*)\)\s*\{/;

module.exports = function () {
	var match = String(validFunction(this)).match(re), fn;

	// eslint-disable-next-line no-new-func
	fn = new Function(
		"fn",
		"return function " +
			match[1].trim() +
			"(" +
			match[2] +
>>>>>>> 96a33e777f461d23705a92babb66d2399584c38c
			") { return fn.apply(this, arguments); };"
	)(this);
	try { mixin(fn, this); }
	catch (ignore) {}
	return fn;
};
